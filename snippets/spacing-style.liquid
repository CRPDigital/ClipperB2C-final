{%- comment -%}
  Intended for blocks and sections that provide values for all the referenced settings.
  Now supports separate mobile padding settings when enable_mobile_padding is true.

  <div class="spacing-style" style="{%  render 'spacing-style', settings: section.settings %}">

   Accepts:
      settings: {block.settings || section.settings}
      suffix: {string}
      scale_min {number}: Value above which spacing scaling will be applied. Default: 20
      disable_scaling {boolean}: Disable scaling. Default: false
{%- endcomment -%}
{%- liquid
  assign properties = 'padding,margin' | split: ','
  assign directions = 'block,inline' | split: ','
  assign edges = ',start,end' | split: ','
  assign min = scale_min | default: 20
-%}
{%- capture variables -%}
  {%- for property in properties -%}
    {%- for direction in directions -%}
      {%- for edge in edges -%}
        {%-liquid
          assign name = property | append: '-' | append: direction

          if edge != blank
            assign name = name | append: '-' | append: edge
          endif

          assign setting_id = name

          if suffix != blank
            assign setting_id = setting_id | append: '-' | append: suffix
          endif

          assign value = settings[setting_id]
          
          comment
            Check for mobile-specific settings if enable_mobile_padding is true
          endcomment
          assign mobile_setting_id = setting_id | append: '-mobile'
          assign mobile_value = settings[mobile_setting_id]
          assign enable_mobile = settings['enable_mobile_padding']
         -%}

        {%- if value != blank -%}
          {%- comment -%} Desktop value (default) {%- endcomment -%}
          {%- if disable_scaling != true and value > min -%}
            --{{ name }}: max({{ min }}px, calc(var(--spacing-scale) * {{ value }}px));
          {%- else -%}
            --{{ name }}: {{ value }}px;
          {%- endif -%}
          
          {%- comment -%} Mobile value (if enabled and different from desktop) {%- endcomment -%}
          {%- if enable_mobile and mobile_value != blank -%}
            @media screen and (max-width: 749px) {
              {%- if disable_scaling != true and mobile_value > min -%}
                --{{ name }}: max({{ min }}px, calc(var(--spacing-scale) * {{ mobile_value }}px));
              {%- else -%}
                --{{ name }}: {{ mobile_value }}px;
              {%- endif -%}
            }
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endfor -%}
  {%- endfor -%}
{%- endcapture -%}
{{- variables | strip | strip_newlines -}}
